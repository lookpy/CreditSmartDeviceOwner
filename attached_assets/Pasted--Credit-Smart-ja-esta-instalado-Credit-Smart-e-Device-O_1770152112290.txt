
Credit Smart ja esta instalado

Credit Smart e Device Owner

O script ira:
  1. Parar o app
  2. Remover Device Owner
  3. Remover usuarios secundarios
  4. Desinstalar app antigo
  5. Instalar nova versao
  6. Configurar como Device Owner

Continuar? (S/n): 2

=== LIMPANDO INSTALACAO ANTERIOR ===

Parando o app...
App parado

Removendo Device Owner...
  Metodo 1: Via broadcast de auto-remocao...
Broadcasting: Intent { act=com.cdccreditsmart.CLEAR_DEVICE_OWNER flg=0x400000 cmp=com.cdccreditsmart.app/.device.CDCDeviceAdminReceiver }
Broadcast completed: result=0
  Metodo 2: Via dpm remove-active-admin...

Exception occurred while executing 'remove-active-admin':
java.lang.SecurityException: Attempt to remove non-test admin ComponentInfo{com.cdccreditsmart.app/com.cdccreditsmart.app.device.CDCDeviceAdminReceiver} 0
        at com.android.server.devicepolicy.DevicePolicyManagerService.lambda$forceRemoveActiveAdmin$14(DevicePolicyManagerService.java:4119)
        at com.android.server.devicepolicy.DevicePolicyManagerService.$r8$lambda$fdnUFKQIuUgjUufgHXZjxCOEmU4(DevicePolicyManagerService.java:0)
        at com.android.server.devicepolicy.DevicePolicyManagerService$$ExternalSyntheticLambda179.runOrThrow(R8$$SyntheticClass:0)
        at android.os.Binder.withCleanCallingIdentity(Binder.java:550)
        at com.android.server.devicepolicy.DevicePolicyManagerService$Injector.binderWithCleanCallingIdentity(DevicePolicyManagerService.java:1917)
        at com.android.server.devicepolicy.DevicePolicyManagerService.forceRemoveActiveAdmin(DevicePolicyManagerService.java:4115)
        at com.android.server.devicepolicy.DevicePolicyManagerServiceShellCommand.runRemoveActiveAdmin(DevicePolicyManagerServiceShellCommand.java:287)
        at com.android.server.devicepolicy.DevicePolicyManagerServiceShellCommand.onCommand(DevicePolicyManagerServiceShellCommand.java:91)
        at com.android.modules.utils.BasicShellCommandHandler.exec(BasicShellCommandHandler.java:97)
        at android.os.ShellCommand.exec(ShellCommand.java:38)
        at com.android.server.devicepolicy.DevicePolicyManagerService.onShellCommand(DevicePolicyManagerService.java:11557)
        at android.os.Binder.shellCommand(Binder.java:1230)
        at android.os.Binder.onTransact(Binder.java:1043)
        at android.app.admin.IDevicePolicyManager$Stub.onTransact(IDevicePolicyManager.java:6516)
        at android.os.Binder.execTransactInternal(Binder.java:1505)
        at android.os.Binder.execTransact(Binder.java:1444)
  Metodo 3: Via Activity de debug...
Starting: Intent { cmp=com.cdccreditsmart.app/.debug.ClearDeviceOwnerActivity }
Error type 3
Error: Activity class {com.cdccreditsmart.app/com.cdccreditsmart.app.debug.ClearDeviceOwnerActivity} does not exist.

Verificando usuarios secundarios...
Users:
        UserInfo{0:Proprietário(a):4c13} running

Removendo usuarios secundarios (se houver)...

Desinstalando app antigo...
Success

Limpando dados residuais...
Dados limpos

=== LIMPEZA CONCLUIDA ===

Verificando contas Google...
AVISO: Dispositivo possui conta Google configurada
Isso pode impedir a configuracao de Device Owner.

Continuar mesmo assim? (s/N): s

=== INSTALANDO APK ===
Arquivo: C:\CreditSmartDeviceOwner\app\release\app-release.apk

Performing Incremental Install
Serving...
Success
Install command complete in 466 ms
APK instalado com sucesso

=== CONFIGURANDO DEVICE OWNER ===
Comando: C:\Users\sabre\AppData\Local\Android\Sdk\platform-tools\adb.exe shell dpm set-device-owner com.cdccreditsmart.app/.device.CDCDeviceAdminReceiver

com.cdccreditsmart.app/.device.CDCDeviceAdminReceiver was already an admin for user 0. No need to set it again.

Exception occurred while executing 'set-device-owner':
java.lang.IllegalArgumentException: Not active admin: ComponentInfo{com.cdccreditsmart.app/com.cdccreditsmart.app.device.CDCDeviceAdminReceiver}
        at com.android.internal.util.Preconditions.checkArgument(Preconditions.java:64)
        at com.android.server.devicepolicy.DevicePolicyManagerService.setDeviceOwner(DevicePolicyManagerService.java:9770)
        at com.android.server.devicepolicy.DevicePolicyManagerServiceShellCommand.runSetDeviceOwner(DevicePolicyManagerServiceShellCommand.java:264)
        at com.android.server.devicepolicy.DevicePolicyManagerServiceShellCommand.onCommand(DevicePolicyManagerServiceShellCommand.java:87)
        at com.android.modules.utils.BasicShellCommandHandler.exec(BasicShellCommandHandler.java:97)
        at android.os.ShellCommand.exec(ShellCommand.java:38)
        at com.android.server.devicepolicy.DevicePolicyManagerService.onShellCommand(DevicePolicyManagerService.java:11557)
        at android.os.Binder.shellCommand(Binder.java:1230)
        at android.os.Binder.onTransact(Binder.java:1043)
        at android.app.admin.IDevicePolicyManager$Stub.onTransact(IDevicePolicyManager.java:6516)
        at android.os.Binder.execTransactInternal(Binder.java:1505)
        at android.os.Binder.execTransact(Binder.java:1444)

Concedendo permissoes...
  OK: android.permission.READ_PHONE_STATE
  OK: android.permission.ACCESS_FINE_LOCATION
  OK: android.permission.ACCESS_COARSE_LOCATION
  OK: android.permission.ACCESS_BACKGROUND_LOCATION
All files should be loaded. Notifying the device.
  OK: android.permission.POST_NOTIFICATIONS
  OK: android.permission.RECEIVE_SMS
  OK: android.permission.READ_SMS
  OK: android.permission.CAMERA
  OK: android.permission.READ_EXTERNAL_STORAGE
  OK: android.permission.WRITE_EXTERNAL_STORAGE
  SKIP: android.permission.SCHEDULE_EXACT_ALARM
  SKIP: android.permission.USE_EXACT_ALARM

Desabilitando otimizacao de bateria...
Added: com.cdccreditsmart.app

Iniciando Credit Smart...
Starting: Intent { cmp=com.cdccreditsmart.app/.MainActivity }
Error type 3
Error: Activity class {com.cdccreditsmart.app/com.cdccreditsmart.app.MainActivity} does not exist.

==============================================
  PROVISIONING CONCLUIDO
==============================================

Proximos passos:
  1. O app deve iniciar automaticamente
  2. Faca o pareamento com o codigo do contrato
  3. Aguarde a sincronizacao com o backend

Comandos uteis:
  Ver logs:    C:\Users\sabre\AppData\Local\Android\Sdk\platform-tools\adb.exe logcat -s CDCDeviceAdminReceiver AppPolicyManager
  Ver status:  C:\Users\sabre\AppData\Local\Android\Sdk\platform-tools\adb.exe shell dumpsys device_policy
  Reinstalar:  "C:\Users\sabre\Desktop\Cred Funções\Prova.bat"

Pressione qualquer tecla para continuar. . .